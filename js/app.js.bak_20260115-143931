(function(){'use strict';
const $=(s,r=document)=>r.querySelector(s),$$=(s,r=document)=>Array.from(r.querySelectorAll(s));
const notices=[{id:1,title:'ì‹ ì… ë¶€ì› OT ì•ˆë‚´',body:'ì´ë²ˆ ì£¼ ê¸ˆìš”ì¼ 18:00ì— OT ì§„í–‰í•©ë‹ˆë‹¤. ì¥ì†ŒëŠ” ì¶”í›„ ê³µì§€!',tag:'ê³µì§€',date:'2026-01-10'},
{id:2,title:'1ì›” ìŠ¤í„°ë”” ëª¨ì§‘',body:'í´ë¼ìš°ë“œ/ë°±ì—”ë“œ/ì•Œê³ ë¦¬ì¦˜ ìŠ¤í„°ë””ë¥¼ ëª¨ì§‘í•©ë‹ˆë‹¤. ê´€ì‹¬ ìˆëŠ” ë¶„ì€ ëŒ“ê¸€!',tag:'ëª¨ì§‘',date:'2026-01-12'},
{id:3,title:'ì¥ë¹„ ëŒ€ì—¬ ê·œì • ì—…ë°ì´íŠ¸',body:'ë…¸íŠ¸ë¶/ì¹´ë©”ë¼ ëŒ€ì—¬ ê·œì •ì´ ê°±ì‹ ë˜ì—ˆìŠµë‹ˆë‹¤. ìš´ì˜ì§„ ê³µì§€ë¥¼ í™•ì¸í•˜ì„¸ìš”.',tag:'ê·œì •',date:'2026-01-15'},
{id:4,title:'ë™ì•„ë¦¬ íšŒë¹„ ì•ˆë‚´',body:'íšŒë¹„ ë‚©ë¶€ ê¸°ê°„: 1/10~1/20. ê³„ì¢ŒëŠ” ìš´ì˜ì§„ì—ê²Œ ë¬¸ì˜í•˜ì„¸ìš”.',tag:'ì•ˆë‚´',date:'2026-01-10'},
{id:5,title:'í”„ë¡œì íŠ¸ íŒ€ ë¹Œë”©',body:'1ì›” ë§ê¹Œì§€ íŒ€ êµ¬ì„±ì„ ì™„ë£Œí•©ë‹ˆë‹¤. ì•„ì´ë””ì–´ ê³µìœ  í™˜ì˜!',tag:'í”„ë¡œì íŠ¸',date:'2026-01-18'}];
const events=[{title:'OT(ì‹ ì… ë¶€ì›)',when:'2026-01-10 18:00',place:'ê°•ì˜ì‹¤ A (ì˜ˆì •)'},
{title:'ì •ê¸° ì„¸ì…˜',when:'2026-01-14 19:00',place:'ë™ì•„ë¦¬ë°©'},
{title:'ìŠ¤í„°ë”” í‚¥ì˜¤í”„',when:'2026-01-17 14:00',place:'ì˜¨ë¼ì¸'}];
const esc=s=>String(s).replace(/[&<>"']/g,m=>({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'}[m]));
const shuffle=a=>{a=a.slice();for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a};
const fmt=d=>{const y=d.getFullYear(),m=String(d.getMonth()+1).padStart(2,'0'),dd=String(d.getDate()).padStart(2,'0'),w=['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '][d.getDay()];return `${y}.${m}.${dd} (${w})`};
const parseDT=s=>{const [dp,tp]=s.split(' ');const [y,m,d]=dp.split('-').map(Number);const [hh,mm]=tp.split(':').map(Number);return new Date(y,m-1,d,hh,mm,0,0)};
function applyTheme(t){document.documentElement.setAttribute('data-theme',t);const i=$('#themeToggle .icon');if(i)i.textContent=t==='light'?'â˜€ï¸':'ğŸŒ™';try{localStorage.setItem('codein_theme',t)}catch(e){}}
function initTheme(){let s=null;try{s=localStorage.getItem('codein_theme')}catch(e){}applyTheme(s==='light'?'light':'dark');const b=$('#themeToggle');if(b)b.addEventListener('click',()=>{const c=document.documentElement.getAttribute('data-theme')||'dark';applyTheme(c==='light'?'dark':'light')})}
function initNav(){const b=$('#navToggle'),m=$('#navMenu');if(!b||!m)return;b.addEventListener('click',()=>{const o=m.classList.toggle('is-open');b.setAttribute('aria-expanded',String(o))});$$('#navMenu a').forEach(a=>a.addEventListener('click',()=>{m.classList.remove('is-open');b.setAttribute('aria-expanded','false')}))}
function setYear(){const y=$('#yearText');if(y)y.textContent=String(new Date().getFullYear())}
function nextEvent(){const now=new Date();return events.map(e=>({...e,dt:parseDT(e.when)})).filter(e=>e.dt>=now).sort((a,b)=>a.dt-b.dt)[0]||null}
function noticeCard(n,compact){const el=document.createElement('article');el.className='card card--padded';el.innerHTML=`<div class="card__meta">${esc(n.date)} Â· <span class="tag">${esc(n.tag)}</span></div><h3 class="card__title">${esc(n.title)}</h3><div class="card__body">${esc(n.body)}</div><div class="card__footer"><span class="muted small">${compact?'ë¹„íšŒì›: ìš”ì•½ë§Œ':'ìƒì„¸(ì •ì ) ë³´ê¸°'}</span><a class="btn btn--outline" href="./notice.html#notice-${n.id}">${compact?'ë”ë³´ê¸°':'ë§í¬'}</a></div>`;return el}
function renderMiniCalendar(host){host.innerHTML='';['ì¼','ì›”','í™”','ìˆ˜','ëª©','ê¸ˆ','í† '].forEach(d=>{const el=document.createElement('div');el.className='cal__dow';el.textContent=d;host.appendChild(el)});
const now=new Date(),y=now.getFullYear(),m=now.getMonth();const first=new Date(y,m,1),last=new Date(y,m+1,0);const blank=first.getDay(),days=last.getDate();
const eDays=new Set(events.map(e=>{const dt=parseDT(e.when);return (dt.getFullYear()===y&&dt.getMonth()===m)?dt.getDate():null}).filter(Boolean));
for(let i=0;i<blank;i++){const c=document.createElement('div');c.className='cal__cell';c.innerHTML='<div class="cal__day muted"> </div>';host.appendChild(c)}
for(let d=1;d<=days;d++){const c=document.createElement('div');c.className='cal__cell';const has=eDays.has(d);c.innerHTML=`<div class="cal__day">${d}${has?'<span class="cal__dot" aria-hidden="true"></span>':''}</div>`;host.appendChild(c)}
}
function renderHome(){const t=$('#todayText');if(t)t.textContent=fmt(new Date());const n=nextEvent();const ne=$('#nextEventText');if(ne)ne.textContent=n?n.title:'ì—†ìŒ';
const cnt=$('#noticeCountText');if(cnt)cnt.textContent=`${notices.length}ê±´`;
const wrap=$('#noticeCards');if(wrap){wrap.innerHTML='';shuffle(notices).slice(0,3).forEach(x=>wrap.appendChild(noticeCard(x,true)))}
const r=$('#refreshBtn');if(r&&wrap){r.addEventListener('click',()=>{wrap.innerHTML='';shuffle(notices).slice(0,3).forEach(x=>wrap.appendChild(noticeCard(x,true)))})}}
function renderNotice(){const list=$('#noticeList');if(!list)return;list.innerHTML='';notices.forEach(n=>{const c=noticeCard(n,false);c.id=`notice-${n.id}`;list.appendChild(c)});
const hint=$('#noticeHint');if(hint)hint.textContent=`ì´ ${notices.length}ê±´ (ìƒ˜í”Œ)`;
const s=$('#noticeSearch');if(s)s.addEventListener('input',()=>{const q=s.value.trim().toLowerCase();const f=notices.filter(n=>n.title.toLowerCase().includes(q)||n.body.toLowerCase().includes(q)||n.tag.toLowerCase().includes(q));
list.innerHTML='';f.forEach(n=>{const c=noticeCard(n,false);c.id=`notice-${n.id}`;list.appendChild(c)});if(hint)hint.textContent=`ê²€ìƒ‰ ê²°ê³¼ ${f.length}ê±´ (ìƒ˜í”Œ)`})}
function renderBoards(){const stub=$('#boardsStub');if(stub)stub.innerHTML=`<div class="card card--padded"><h3 class="card__title">ê²Œì‹œíŒì€ ë¡œê·¸ì¸ í›„ ì´ìš©</h3><p class="muted">í”„ë¡œí† íƒ€ì… ë‹¨ê³„ì—ì„œëŠ” ê¶Œí•œ/ê¸€ì“°ê¸°/ëŒ“ê¸€ ê¸°ëŠ¥ì„ ì—°ê²°í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.</p><ul class="bullets"><li>ììœ ê²Œì‹œíŒ / Q&amp;A / ë¹„ë°€ê²Œì‹œíŒ</li><li>ê¶Œí•œ: íšŒì› ì´ìƒ (ë¹„íšŒì›ì€ ëª©ë¡ë§Œ)</li><li>ì‹ ê³ /ë¸”ë¼ì¸ë“œ: ì¶”í›„</li></ul><a class="btn btn--primary" href="./mypage.html#login">ë¡œê·¸ì¸</a></div>`}
function renderCalendar(){const ul=$('#eventList');if(ul){ul.innerHTML='';events.forEach(e=>{const li=document.createElement('li');li.innerHTML=`<strong>${esc(e.title)}</strong> Â· ${esc(e.when)} Â· <span class="muted">${esc(e.place)}</span>`;ul.appendChild(li)})}
const mini=$('#miniCalendar');if(mini)renderMiniCalendar(mini);
const n=nextEvent();const ne=$('#nextEventText');if(ne)ne.textContent=n?`${n.title} Â· ${n.when}`:'ì—†ìŒ'}
function renderGallery(){const tip=$('#galleryTip');if(tip)tip.innerHTML=`ë¹„íšŒì›ì€ <span class="kbd">ì—´ëŒ</span>ë§Œ Â· ì—…ë¡œë“œëŠ” <span class="kbd">ìš´ì˜ì§„</span> ê¶Œí•œ`}
document.addEventListener('DOMContentLoaded',()=>{initTheme();initNav();setYear();
const p=document.body.getAttribute('data-page')||'home';
if(p==='home')renderHome(); if(p==='notice')renderNotice(); if(p==='boards')renderBoards(); if(p==='calendar')renderCalendar(); if(p==='gallery')renderGallery();
});
})();